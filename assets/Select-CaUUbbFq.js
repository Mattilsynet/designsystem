import{x as Be,y as ze,d as Fe,h as V,p as J,w as ke,s as W,a as T,m as B,t as R,b as xe,e as me}from"./props-C0tvRuaH.js";import{o as ge,p as he,b as P,d as O,g as e,i as be,h as G,f as Q,t as o,a as we,s as D,c as S,u as Ue,Z as Ze}from"./runtime-h0AMGDom.js";import{e as X,i as te}from"./each-DBQXtrgh.js";import{h as Te}from"./html-CjI7j8Lz.js";import{s,c as re,b as pe}from"./attributes-Cx6y8_P7.js";import{t as H}from"./class-Dqk93oQ7.js";import{t as Ge,f as Qe}from"./index-Cvmj00a4.js";import{b as Xe}from"./input-Bhn6W10B.js";import{b as _e}from"./this-B-g0KYFp.js";import{o as Ye}from"./index-client-B5MNzxnb.js";import{L as Oe}from"./Label-D8X8gfhz.js";import{I as qe}from"./InputErrorMessage-Dd923iph.js";import{S as $e}from"./SummaryDetail-DNzTolJt.js";import{f as et,t as ae,c as ne}from"./utils-UxKBq1MU.js";import"./proj-CDaZOfWJ.js";function Ee(i,t,r){if(i.multiple)return it(i,t);for(var v of i.options){var m=Y(v);if(ze(m,t)){v.selected=!0;return}}(!r||t!==void 0)&&(i.selectedIndex=-1)}function tt(i,t){ge(()=>{var r=new MutationObserver(()=>{var v=i.__value;Ee(i,v)});return r.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function at(i,t,r=t){var v=!0;Be(i,"change",m=>{var x=m?"[selected]":":checked",f;if(i.multiple)f=[].map.call(i.querySelectorAll(x),Y);else{var A=i.querySelector(x)??i.querySelector("option:not([disabled])");f=A&&Y(A)}r(f)}),ge(()=>{var m=t();if(Ee(i,m,v),v&&m===void 0){var x=i.querySelector(":checked");x!==null&&(m=Y(x),r(m))}i.__value=m,v=!1}),tt(i)}function it(i,t){for(var r of i.options)r.selected=~t.indexOf(Y(r))}function Y(i){return"__value"in i?i.__value:i.value}let lt=0;function rt(i,t,r,v,m,x,f,A,C,I,L,q,g,h,u,d,w,K){switch(i.stopPropagation(),t(!0),i.key){case A:{if(!e(r))break;Object.keys(e(v)).includes(e(r).value)?m(e(r).value):x(e(r)),O(f,"");break}case C:{t(!1),O(f,"");break}case I:case L:{const N=i.key===L?-1:1,$=e(q).indexOf(e(r))+N;O(r,J(g($,e(q))));const ie=h($,e(q).length);u(e(d).children[ie],e(d));break}case w:case K:{const N=i.key===K?0:e(q).length-1;O(r,J(e(q)[N])),u(e(d).children[N],e(d));break}}}function nt(i,t,r,v,m,x){var A;i.preventDefault();const f=i.target.dataset.value;f&&(e(t)[f]?r(f):(v(e(m).filter(C=>C.value===f)[0]),(A=e(x))==null||A.focus()))}var st=(i,t,r)=>t(i,e(r).value),dt=(i,t,r)=>t(i,e(r).value),ot=R('<li><button type="button" class="mt-button mt-button--flat mt-button--small closable token"><span> </span></button></li>'),ut=R('<div class="text-small token-label" data-testid="multiselect-selected-list"> </div> <ul class="mt-ul token-wrapper list-unstyled"></ul> <input type="text" class="mt-input hidden">',1),ct=R('<div class="hint m-t-xxs"><!></div>'),vt=(i,t)=>{i.preventDefault(),t()},ft=R('<input class="mt-input" autocomplete="off" type="text" role="combobox" data-testid="multiselect-input" aria-autocomplete="list" aria-controls="list"> <span class="down-arrow" aria-hidden="true"></span>',1),yt=i=>i.preventDefault(),mt=R('<li role="option" class="option"> </li>'),bt=R('<div class="multiselect m-t-xxs"><div class="actions"><!></div> <ul id="list" class="mt-ul options options-dropdown" role="listbox" data-testid="multiselect-list" aria-multiselectable="true"></ul></div>'),pt=R('<div class="form-control"><input type="checkbox" class="mt-input input__control"> <label class="mt-label"> </label></div>'),_t=R('<div class="form-control"><input type="checkbox" class="mt-input input__control"> <label class="mt-label"> </label></div>'),kt=R("<!> <!>",1),xt=R("<!> <!> <!> <!> <!>",1);function gt(i,t){he(t,!0);let r=V(t,"values",15),v=V(t,"readonly",3,!1),m=V(t,"placeholder",3,""),x=V(t,"options",19,()=>[]),f=V(t,"preferredOptions",19,()=>[]),A=V(t,"tagsLabel",3,""),C=V(t,"loadJs",3,!0),I=P(void 0),L=P(void 0),q=P(J([])),g=P(void 0),h=P(!1),u=P(!0),d=P(J({})),w=P(void 0);const K="Enter",N="Escape",$="End",ie="Home",Se="ArrowUp",De="ArrowDown",z=`ui-select-${lt++}`;Ye(()=>{O(q,J([...f(),...x()])),r()&&O(d,J(e(q).reduce((a,l)=>et(r()).includes(l.value)?{...a,[l.value]:l}:a,{}))),O(u,!1)}),be(()=>{e(u)||r(Object.values(e(d)).map(a=>a.value))}),be(()=>{(e(g)&&!e(F).includes(e(g))||!e(g)&&e(L))&&O(g,J(e(F)[0]))});let F=G(()=>e(q).filter(a=>e(L)?a.text.toLowerCase().includes(e(L).toLowerCase()):a)),Re=G(()=>e(g)?e(F).indexOf(e(g)):void 0);function se(a){v()||(e(d)[a.value]=a)}function ee(a){if(!v()){const{[a]:l,...c}=e(d);O(d,J(c))}}function le(a){var l;v()||(typeof a=="boolean"?(O(h,J(a)),a&&((l=e(I))==null||l.focus())):O(h,!e(h)),e(h)||O(g,void 0))}function Ae(a,l){const{offsetHeight:c,offsetTop:M}=a,{offsetHeight:j,scrollTop:b}=l,E=M<b,p=M+c>b+j;E?l.scrollTo(0,M):p&&l.scrollTo(0,M-j+c)}function Le(a,l){return a<0?l-1:a===l?0:a}function Ve(a,l){return a<0?l[l.length-1]:a===l.length?l[0]:l[a]}function de(){le(!1)}function Ce(){le(!0)}function Ie(a,l){a.preventDefault(),ee(l)}function Me(a,l){a.key===K&&ee(l)}var oe=xt(),ue=Q(oe),je=G(()=>`${t.name}-input`);Oe(ue,{get for(){return e(je)},get isRequired(){return t.isRequired},get textOptional(){return t.textOptional},children:(a,l)=>{var c=ke();o(()=>W(c,t.label)),T(a,c)},$$slots:{default:!0}});var ce=D(ue,2);{var He=a=>{var l=ut(),c=Q(l);s(c,"id",`${z??""}-selected-label`);const M=G(()=>!Object.values(e(d)).length);o(()=>H(c,"hidden",e(M)));var j=S(c),b=D(c,2);s(b,"id",`${z??""}-selected`),s(b,"aria-labelledby",`${z??""}-selected-label`),X(b,21,()=>Object.values(e(d)),te,(p,n,y)=>{var k=ot(),_=S(k);s(_,"id",`${z??""}-remove-${y??""}`),_.__keydown=[st,Me,n],_.__click=[dt,Ie,n];var U=S(_),Z=S(U);o(()=>{s(_,"data-id",e(n).value),s(_,"aria-label",e(n).removeAriaLabel),W(Z,e(n).text)}),T(p,k)});var E=D(b,2);o(()=>{W(j,A()),re(E,r()),s(E,"name",t.name)}),T(a,l)};B(ce,a=>{C()&&a(He)})}var ve=D(ce,2);{var Je=a=>{var l=ct(),c=S(l);Te(c,()=>t.helpText),o(()=>s(l,"id",`${t.name}-hint`)),T(a,l)};B(ve,a=>{t.helpText&&a(Je)})}var fe=D(ve,2);{var Ke=a=>{qe(a,xe(()=>t.error,{get hiddenErrorText(){return t.hiddenErrorText},class:"m-t-xxs"}))};B(fe,a=>{t.error&&a(Ke)})}var Ne=D(fe,2);{var Pe=a=>{var l=bt(),c=S(l);c.__click=[vt,Ce];var M=S(c);{var j=E=>{var p=ft(),n=Q(p);n.__keyup=[rt,le,g,d,ee,se,L,K,N,De,Se,F,Ve,Le,Ae,w,$,ie],_e(n,y=>O(I,y),()=>e(I)),o(()=>{s(n,"id",`${t.name}-input`),s(n,"aria-expanded",e(h)),s(n,"aria-activedescendant",e(g)?`${z}-${e(g).value}-${e(Re)}`:void 0),s(n,"placeholder",m())}),me("blur",n,de),Xe(n,()=>e(L),y=>O(L,y)),T(E,p)};B(M,E=>{v()||E(j)})}var b=D(c,2);b.__mousedown=[yt],b.__mouseup=[nt,d,ee,se,q,I],X(b,21,()=>e(F),te,(E,p,n)=>{var y=mt(),k=S(y);o(()=>{s(y,"id",`${z??""}-${e(p).value??""}-${n??""}`),s(y,"aria-selected",!!e(d)[e(p).value]),s(y,"data-value",e(p).value),H(y,"divider",e(F).length===e(q).length&&n===f().length-1),H(y,"selected",e(d)[e(p).value]),H(y,"active",e(g)===e(p)),W(k,e(p).text)}),T(E,y)}),_e(b,E=>O(w,E),()=>e(w)),o(()=>{H(l,"readonly",v()),H(b,"hidden",!e(h))}),me("blur",c,de),Ge(3,b,()=>Qe,()=>({duration:200,y:5})),T(a,l)},We=a=>{var l=G(()=>`${`${t.name}-input`??""}-label`);$e(a,{title:"",get ariaLabelledBy(){return e(l)},detailsClass:"full-width multiselect--no-js",summaryWrapperClass:"options-dropdown",children:(c,M)=>{var j=kt(),b=Q(j);X(b,17,f,te,(p,n,y)=>{var k=pt(),_=S(k);o(()=>s(_,"id",ae(e(n).value))),o(()=>{var ye;return pe(_,(ye=r())==null?void 0:ye.includes(e(n).value))}),o(()=>s(_,"aria-describedby",ne(t.helpText?t.name:void 0,t.error)));var U=D(_,2);o(()=>s(U,"for",ae(e(n).value)));var Z=S(U);o(()=>{H(k,"divider",y===f().length-1),s(_,"name",t.name),re(_,e(n).value),H(_,"error",t.error),W(Z,e(n).text)}),T(p,k)});var E=D(b,2);X(E,17,x,te,(p,n)=>{var y=_t(),k=S(y);o(()=>s(k,"id",ae(e(n).value))),o(()=>{var Z;return pe(k,(Z=r())==null?void 0:Z.includes(e(n).value))}),o(()=>s(k,"aria-describedby",ne(t.helpText?t.name:void 0,t.error)));var _=D(k,2);o(()=>s(_,"for",ae(e(n).value)));var U=S(_);o(()=>{s(k,"name",t.name),re(k,e(n).value),H(k,"error",t.error),W(U,e(n).text)}),T(p,y)}),T(c,j)},$$slots:{default:!0}})};B(Ne,a=>{C()?a(Pe):a(We,!1)})}T(i,oe),we()}Fe(["keydown","click","keyup","mousedown","mouseup"]);gt.__docgen={data:[{name:"name",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"label",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"values",visibility:"public",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"type",type:"string",text:"string"},{kind:"type",type:"array",text:"string[]"}],text:"string | string[]"},static:!1,readonly:!1,defaultValue:"..."},{name:"readonly",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"placeholder",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"options",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"MultiSelectOption[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"preferredOptions",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"MultiSelectOption[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"isRequired",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1},{name:"error",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ErrorDetail"},static:!1,readonly:!1},{name:"helpText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"textOptional",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"hiddenErrorText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"tagsLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"loadJs",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"}],name:"MultiSelect.svelte"};let ht=0;var wt=R('<div class="hint"><!></div>'),Tt=R("<option> </option>"),Ot=R('<!> <!> <!> <select class="form-field"></select>',1);function qt(i,t){he(t,!0);let r=V(t,"value",15),v=V(t,"options",19,()=>[]),m=V(t,"showOptionalText",3,!0);const x=`ui-select-${ht++}`;let f=!1;Ue(()=>{Ze().then(()=>{var u;r()===void 0&&!f&&document&&(r((u=document==null?void 0:document.querySelector(`input[name="${t.name}"]:checked`))==null?void 0:u.value),f=!0)})});var A=Ot(),C=Q(A);Oe(C,{for:x,get isRequired(){return t.isRequired},get textOptional(){return t.textOptional},get showOptionalText(){return m()},children:(u,d)=>{var w=ke();o(()=>W(w,t.label)),T(u,w)},$$slots:{default:!0}});var I=D(C,2);{var L=u=>{var d=wt(),w=S(d);Te(w,()=>t.helpText),o(()=>s(d,"id",`${t.name}-hint`)),T(u,d)};B(I,u=>{t.helpText&&u(L)})}var q=D(I,2);{var g=u=>{qe(u,xe(()=>t.error,{get hiddenErrorText(){return t.hiddenErrorText}}))};B(q,u=>{t.error&&u(g)})}var h=D(q,2);s(h,"id",x),o(()=>s(h,"aria-describedby",ne(t.helpText?t.name:void 0,t.error))),X(h,21,v,u=>u.value,(u,d)=>{var w=Tt(),K={},N=S(w);o(()=>{K!==(K=e(d).value)&&(w.value=(w.__value=e(d).value)==null?"":e(d).value),W(N,e(d).text)}),T(u,w)}),o(()=>{s(h,"name",t.name),s(h,"aria-required",t.isRequired)}),at(h,r),T(i,A),we()}qt.__docgen={data:[{name:"name",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"label",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"value",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"error",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ErrorDetail"},static:!1,readonly:!1},{name:"helpText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"isRequired",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1},{name:"options",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"{ value: string; text: string; }[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"textOptional",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"showOptionalText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"hiddenErrorText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1}],name:"Select.svelte"};export{gt as M,qt as S};
