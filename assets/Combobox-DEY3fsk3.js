import{d as ft,h as c,w as yt,s as bt,a as T,m as S,t as J,b as K}from"./props-C0tvRuaH.js";import{p as mt,t as x,n as ht,a as vt,c as E,s as h}from"./runtime-h0AMGDom.js";import{h as gt}from"./html-CjI7j8Lz.js";import{s as kt}from"./create-runtime-stories-BSZiRmpa.js";import{s as b,d as j}from"./attributes-Cx6y8_P7.js";import{s as _t,t as q}from"./class-Dqk93oQ7.js";import{b as xt}from"./input-Bhn6W10B.js";import{b as Et}from"./this-B-g0KYFp.js";import{L as wt}from"./Label-D8X8gfhz.js";import{I as W}from"./InputErrorMessage-Dd923iph.js";import{c as It}from"./utils-UxKBq1MU.js";import"./proj-CDaZOfWJ.js";var g=typeof window<"u"&&typeof window.document<"u"&&typeof window.navigator<"u",Lt=g&&/android/i.test(navigator.userAgent),H=g&&/iPad|iPhone|iPod/.test(navigator.userAgent),Q=g&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),G;g&&/^Mac/i.test(((G=navigator.userAgentData)==null?void 0:G.platform)||navigator.platform);var Tt=`${Lt?"data":"aria"}-labelledby`,X=`${Q?"aria":"data"}-multiselectable`,Z=":host(:not([hidden])) { display: block }",St="outline: 1px dotted; outline: 5px auto Highlight; outline: 5px auto -webkit-focus-ring-color",$=typeof HTMLElement>"u"?class{}:HTMLElement;function a(t,e,i){return i===void 0?(t==null?void 0:t.getAttribute(e))??null:(i===null?t==null||t.removeAttribute(e):(t==null?void 0:t.getAttribute(e))!==i&&(t==null||t.setAttribute(e,i)),null)}var tt=(t,e,i)=>{for(const r of i[0].split(","))i[0]=r,Element.prototype[`${t}EventListener`].apply(e,i)},C=(t,...e)=>tt("add",t,e),O=(t,...e)=>tt("remove",t,e),et=(t,e)=>t.attachShadow({mode:"open"}).append(z("slot"),z("style",e)),w=new WeakMap,it=(t,e)=>{if(e===void 0)return w.get(t);try{w.get(t).disconnect(),w.delete(t)}catch{}if(e){const i=new MutationObserver(r=>t.handleEvent({type:"mutation",detail:r}));i.observe(t,e),w.set(t,i)}},at=t=>{var i;const e=((i=t.getRootNode)==null?void 0:i.call(t))||t.ownerDocument;return e instanceof Document||e instanceof ShadowRoot?e:document},At=0,Y=t=>t?(t.id||(t.id=`:${t.nodeName.toLowerCase()}${(++At).toString(32)}`),t.id):"",z=(t,e,i)=>{const r=document.createElement(t);return e&&(r.textContent=e),r},nt={define:(t,e)=>!g||window.customElements.get(t)||window.customElements.define(t,e)},A="disabled",k="selected",Ct=class extends ${static get observedAttributes(){return[A,k]}constructor(){super(),et(this,`${Z}:host(:focus){${St}}:host{ cursor: pointer }`)}connectedCallback(){H||(this.tabIndex=-1),a(this,"role","option"),this.attributeChangedCallback()}attributeChangedCallback(){a(this,"aria-disabled",`${this.disabled}`),a(this,"aria-selected",`${this.selected}`)}get defaultSelected(){return this[k]}set defaultSelected(t){this[k]=t}get disabled(){return a(this,A)!==null}set disabled(t){a(this,A,t?"":null)}get form(){return this.closest("form")}get index(){var e;const t=(e=this.closest("u-datalist"))==null?void 0:e.getElementsByTagName("u-option");return Array.from(t||[this]).indexOf(this)}get label(){return a(this,"label")||this.text}set label(t){a(this,"label",t)}get selected(){return a(this,k)!==null}set selected(t){a(this,k,t?"":null)}get text(){var t;return((t=this.textContent)==null?void 0:t.trim())||""}set text(t){this.textContent=t}get value(){return a(this,"value")||this.text}set value(t){a(this,"value",t)}};nt.define("u-option",Ct);var D=!1,rt=Q&&!H,st="click,focusout,input,keydown,mousedown,mouseup",Ot=class extends ${constructor(){super(),this._blurTimer=0,this._input=null,this._root=null,this._value="",et(this,`${Z}::slotted(u-option[disabled]) { display: none !important }`)}connectedCallback(){this.hidden=!0,this._root=at(this),a(this,"role","listbox"),C(this._root,"focusin",this),C(this._root,"focus",this,!0),setTimeout(()=>{var e;const t=(e=this._root)==null?void 0:e.querySelectorAll(`input[list="${this.id}"]`);for(const i of t||[])a(i,"aria-expanded",`${rt}`)})}disconnectedCallback(){O(this._root||this,"focus",this,!0),O(this._root||this,"focusin",this),M(this),this._root=null}handleEvent(t){const{type:e}=t;t.defaultPrevented||(e==="click"&&Mt(this,t),(e==="focus"||e==="focusin")&&Dt(this,t),e==="focusout"&&Ht(this),e==="keydown"&&Pt(this,t),(e==="mutation"||e==="input")&&lt(this,t),e==="mouseup"&&(D=!1),e==="mousedown"&&(D=this.contains(t.target)))}get options(){return this.getElementsByTagName("u-option")}},Dt=(t,{target:e})=>{var n;const i=t._input===e;if(i||t.contains(e))return clearTimeout(t._blurTimer);!i&&e instanceof HTMLInputElement&&a(e,"list")===t.id&&(t._input&&M(t),t._input=e,t._input.autocomplete="off",a(t,Tt,Y((n=t._input.labels)==null?void 0:n[0])),a(t._input,"aria-autocomplete","list"),a(t._input,"aria-controls",Y(t)),a(t._input,"role","combobox"),C(t._root||t,st,t),it(t,{attributeFilter:["value"],attributes:!0,childList:!0,subtree:!0}),v(t,!0))},Ht=t=>{D||(t._blurTimer=setTimeout(()=>M(t)))},Mt=(t,{target:e})=>{var n,u,l,f,p;const i=a(t,X)!=="true",r=[...t.options].find(s=>s.contains(e));if(t._input===e)v(t,!0);else if(r){for(const s of t.options)s===r?s.selected=!0:i&&(s.selected=!1);(u=(n=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:n.set)==null||u.call(t._input,r.value),i&&((l=t._input)==null||l.focus(),v(t,!1)),(f=t._input)==null||f.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),(p=t._input)==null||p.dispatchEvent(new Event("change",{bubbles:!0}))}},Pt=(t,e)=>{var f,p;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;e.key!=="Escape"&&v(t,!0);const{key:i}=e,r=(f=t._root)==null?void 0:f.activeElement,n=ot(t),u=n.indexOf(r);let l=-1;if(i==="ArrowDown"&&(l=(u+1)%n.length),i==="ArrowUp"&&(l=(~u?u:n.length)-1),~u&&((i==="Home"||i==="PageUp")&&(l=0),(i==="End"||i==="PageDown")&&(l=n.length-1),i==="Enter"))return n[u].click(),e.preventDefault();if(n[l])for(const s of n)s.tabIndex=-1;n[l]&&e.preventDefault(),(p=n[l]||t._input)==null||p.focus(),i==="Escape"&&v(t,!1)},v=(t,e)=>{t.hidden=!e,t._input&&a(t._input,"aria-expanded",`${rt||e}`),e&&lt(t)},M=t=>{O(t._root||t,st,t),it(t,!1),v(t,!1),t._input=null},ot=t=>[...t.options].filter(e=>!e.disabled&&e.offsetWidth&&e.offsetHeight),lt=(t,e)=>{var p;const i=((p=t._input)==null?void 0:p.value.toLowerCase().trim())||"";if(!((e==null?void 0:e.type)==="mutation"||t._value!==i))return;const n=t.hidden,u=a(t,X)!=="true",l=e instanceof InputEvent&&e.inputType;t.hidden=!0,t._value=i;for(const s of t.options){const m=`${s.value}${s.label}${s.text}`.toLowerCase();s.hidden=!m.includes(i),u&&l&&(s.selected=!1)}t.hidden=n;const f=ot(t);H&&f.map((s,m,{length:I})=>{s.title=`${m+1}/${I}`})};g&&Object.defineProperty(HTMLInputElement.prototype,"list",{configurable:!0,enumerable:!0,get(){return at(this).getElementById(a(this,"list")||"")}});nt.define("u-datalist",Ot);var Rt=J('<div class="hint"><!></div>'),Vt=J('<div class="combobox-wrapper"><!> <!> <!> <!> <div class="actions m-t-xxs"><input type="text" autocomplete="off" aria-autocomplete="list"> <span role="status" aria-live="assertive"></span></div> <u-datalist><!></u-datalist></div>',2);function Ft(t,e){mt(e,!0);let i=c(e,"inputName",3,""),r=c(e,"listName",3,""),n=c(e,"inputLabel",3,""),u=c(e,"inputValue",15),l=c(e,"inputClass",3,""),f=c(e,"showOptionalText",3,!0),p=c(e,"formInProgressAriaLabel",3,"SÃ¸ker"),s=c(e,"isLoading",3,!1),m=c(e,"inputRef",15),I=c(e,"isFetchFallback",3,!1);var P=Vt(),R=E(P);wt(R,{get textOptional(){return e.textOptional},get isRequired(){return e.inputIsRequired},get showOptionalText(){return f()},get for(){return i()},children:(o,y)=>{var _=yt();x(()=>bt(_,n())),T(o,_)},$$slots:{default:!0}});var V=h(R,2);{var ut=o=>{var y=Rt(),_=E(y);gt(_,()=>e.inputHelpText),x(()=>b(y,"id",`${i()}-hint`)),T(o,y)};S(V,o=>{e.inputHelpText&&o(ut)})}var F=h(V,2);{var dt=o=>{W(o,K(()=>e.inputError,{get hiddenErrorText(){return e.hiddenErrorText}}))};S(F,o=>{e.inputError&&o(dt)})}var N=h(F,2);{var pt=o=>{W(o,K(()=>e.apiError,{get hiddenErrorText(){return e.hiddenErrorText}}))};S(N,o=>{I()&&e.apiError&&o(pt)})}var B=h(N,2),d=E(B);x(()=>b(d,"aria-describedby",It(e.inputHelpText?i():void 0,e.inputError))),d.__input=function(...o){var y;(y=e.onInput)==null||y.apply(this,o)},Et(d,o=>m(o),()=>m());var U=h(d,2),L=h(B,2);j(L,"class","mt-datalist");var ct=E(L);kt(ct,()=>e.options??ht),x(()=>{b(d,"id",i()),b(d,"name",i()),b(d,"list",r()),_t(d,`mt-input form-field ${l()??""}`),b(d,"aria-controls",r()),q(d,"error",!!e.inputError),b(U,"aria-label",s()?p():""),q(U,"icon--spinner",s()),j(L,"id",r())}),xt(d,u),T(t,P),vt()}ft(["input"]);Ft.__docgen={data:[{name:"inputName",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"listName",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"inputLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"inputValue",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:"..."},{name:"inputIsRequired",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1},{name:"inputHelpText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"inputClass",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"inputError",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ErrorDetail"},static:!1,readonly:!1},{name:"apiError",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ErrorDetail"},static:!1,readonly:!1},{name:"hiddenErrorText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"textOptional",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"showOptionalText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"formInProgressAriaLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"SÃ¸ker"'},{name:"isLoading",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"inputRef",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"HTMLInputElement"},static:!1,readonly:!1,defaultValue:"..."},{name:"isFetchFallback",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"onInput",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"(e: Event) => Promise<void>"},static:!1,readonly:!1},{name:"options",visibility:"public",keywords:[],kind:"let",type:{kind:"function",text:"Snippet<[]>"},static:!1,readonly:!1}],name:"Combobox.svelte"};export{Ft as C};
