import{S as Lt,i as St,s as At,p as Ot,c as K,m as W,e as Ct,t as E,g as X,a as T,f as Z,u as Rt,q as Dt,v as Ft,d as Y,r as Ht,l as ut,h as Mt}from"./index-D8riOviU.js";import{e as C,s as O,a as d,t as P,x as q,i as z,b as k,n as $,l as tt,d as G,g as Nt,h as Pt}from"./lifecycle-CcifP0R7.js";import{g as dt,a as ft}from"./spread-CgU5AtxT.js";import{L as Vt}from"./Label-BX4PxQ2B.js";import{I as pt}from"./InputErrorMessage-BPBNFNBW.js";import{c as et}from"./utils-DjM8Id44.js";import"./proj-CDaZOfWJ.js";var D=typeof window<"u"&&typeof window.document<"u"&&typeof window.navigator<"u",qt=D&&/android/i.test(navigator.userAgent),J=D&&/iPad|iPhone|iPod/.test(navigator.userAgent),ct=D&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),lt;D&&/^Mac/i.test(((lt=navigator.userAgentData)==null?void 0:lt.platform)||navigator.platform);var Bt=`${qt?"data":"aria"}-labelledby`,mt=`${ct?"aria":"data"}-multiselectable`,bt=":host(:not([hidden])) { display: block }",xt="outline: 1px dotted; outline: 5px auto Highlight; outline: 5px auto -webkit-focus-ring-color",ht=typeof HTMLElement>"u"?class{}:HTMLElement;function p(t,e,i){return i===void 0?(t==null?void 0:t.getAttribute(e))??null:(i===null?t==null||t.removeAttribute(e):(t==null?void 0:t.getAttribute(e))!==i&&(t==null||t.setAttribute(e,i)),null)}var _t=(t,e,i)=>{for(const o of i[0].split(","))i[0]=o,Element.prototype[`${t}EventListener`].apply(e,i)},x=(t,...e)=>_t("add",t,e),U=(t,...e)=>_t("remove",t,e),yt=(t,e)=>t.attachShadow({mode:"open"}).append(nt("slot"),nt("style",e)),V=new WeakMap,gt=(t,e)=>{if(e===void 0)return V.get(t);try{V.get(t).disconnect(),V.delete(t)}catch{}if(e){const i=new MutationObserver(o=>t.handleEvent({type:"mutation",detail:o}));i.observe(t,e),V.set(t,i)}},vt=t=>{var i;const e=((i=t.getRootNode)==null?void 0:i.call(t))||t.ownerDocument;return e instanceof Document||e instanceof ShadowRoot?e:document},Ut=0,it=t=>t?(t.id||(t.id=`:${t.nodeName.toLowerCase()}${(++Ut).toString(32)}`),t.id):"",nt=(t,e,i)=>{const o=document.createElement(t);return e&&(o.textContent=e),o},kt={define:(t,e)=>!D||window.customElements.get(t)||window.customElements.define(t,e)},B="disabled",N="selected",jt=class extends ht{static get observedAttributes(){return[B,N]}constructor(){super(),yt(this,`${bt}:host(:focus){${xt}}:host{ cursor: pointer }`)}connectedCallback(){J||(this.tabIndex=-1),p(this,"role","option"),this.attributeChangedCallback()}attributeChangedCallback(){p(this,"aria-disabled",`${this.disabled}`),p(this,"aria-selected",`${this.selected}`)}get defaultSelected(){return this[N]}set defaultSelected(t){this[N]=t}get disabled(){return p(this,B)!==null}set disabled(t){p(this,B,t?"":null)}get form(){return this.closest("form")}get index(){var e;const t=(e=this.closest("u-datalist"))==null?void 0:e.getElementsByTagName("u-option");return Array.from(t||[this]).indexOf(this)}get label(){return p(this,"label")||this.text}set label(t){p(this,"label",t)}get selected(){return p(this,N)!==null}set selected(t){p(this,N,t?"":null)}get text(){var t;return((t=this.textContent)==null?void 0:t.trim())||""}set text(t){this.textContent=t}get value(){return p(this,"value")||this.text}set value(t){p(this,"value",t)}};kt.define("u-option",jt);var j=!1,Et=ct&&!J,wt="click,focusout,input,keydown,mousedown,mouseup",Kt=class extends ht{constructor(){super(),this._blurTimer=0,this._input=null,this._root=null,this._value="",yt(this,`${bt}::slotted(u-option[disabled]) { display: none !important }`)}connectedCallback(){this.hidden=!0,this._root=vt(this),p(this,"role","listbox"),x(this._root,"focusin",this),x(this._root,"focus",this,!0),setTimeout(()=>{var e;const t=(e=this._root)==null?void 0:e.querySelectorAll(`input[list="${this.id}"]`);for(const i of t||[])p(i,"aria-expanded",`${Et}`)})}disconnectedCallback(){U(this._root||this,"focus",this,!0),U(this._root||this,"focusin",this),Q(this),this._root=null}handleEvent(t){const{type:e}=t;t.defaultPrevented||(e==="click"&&zt(this,t),(e==="focus"||e==="focusin")&&Wt(this,t),e==="focusout"&&Yt(this),e==="keydown"&&Gt(this,t),(e==="mutation"||e==="input")&&It(this,t),e==="mouseup"&&(j=!1),e==="mousedown"&&(j=this.contains(t.target)))}get options(){return this.getElementsByTagName("u-option")}},Wt=(t,{target:e})=>{var r;const i=t._input===e;if(i||t.contains(e))return clearTimeout(t._blurTimer);!i&&e instanceof HTMLInputElement&&p(e,"list")===t.id&&(t._input&&Q(t),t._input=e,t._input.autocomplete="off",p(t,Bt,it((r=t._input.labels)==null?void 0:r[0])),p(t._input,"aria-autocomplete","list"),p(t._input,"aria-controls",it(t)),p(t._input,"role","combobox"),x(t._root||t,wt,t),gt(t,{attributeFilter:["value"],attributes:!0,childList:!0,subtree:!0}),R(t,!0))},Yt=t=>{j||(t._blurTimer=setTimeout(()=>Q(t)))},zt=(t,{target:e})=>{var r,a,l,c,s;const i=p(t,mt)!=="true",o=[...t.options].find(f=>f.contains(e));if(t._input===e)R(t,!0);else if(o){for(const f of t.options)f===o?f.selected=!0:i&&(f.selected=!1);(a=(r=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))==null?void 0:r.set)==null||a.call(t._input,o.value),i&&((l=t._input)==null||l.focus(),R(t,!1)),(c=t._input)==null||c.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),(s=t._input)==null||s.dispatchEvent(new Event("change",{bubbles:!0}))}},Gt=(t,e)=>{var c,s;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;e.key!=="Escape"&&R(t,!0);const{key:i}=e,o=(c=t._root)==null?void 0:c.activeElement,r=Tt(t),a=r.indexOf(o);let l=-1;if(i==="ArrowDown"&&(l=(a+1)%r.length),i==="ArrowUp"&&(l=(~a?a:r.length)-1),~a&&((i==="Home"||i==="PageUp")&&(l=0),(i==="End"||i==="PageDown")&&(l=r.length-1),i==="Enter"))return r[a].click(),e.preventDefault();if(r[l])for(const f of r)f.tabIndex=-1;r[l]&&e.preventDefault(),(s=r[l]||t._input)==null||s.focus(),i==="Escape"&&R(t,!1)},R=(t,e)=>{t.hidden=!e,t._input&&p(t._input,"aria-expanded",`${Et||e}`),e&&It(t)},Q=t=>{U(t._root||t,wt,t),gt(t,!1),R(t,!1),t._input=null},Tt=t=>[...t.options].filter(e=>!e.disabled&&e.offsetWidth&&e.offsetHeight),It=(t,e)=>{var s;const i=((s=t._input)==null?void 0:s.value.toLowerCase().trim())||"";if(!((e==null?void 0:e.type)==="mutation"||t._value!==i))return;const r=t.hidden,a=p(t,mt)!=="true",l=e instanceof InputEvent&&e.inputType;t.hidden=!0,t._value=i;for(const f of t.options){const g=`${f.value}${f.label}${f.text}`.toLowerCase();f.hidden=!g.includes(i),a&&l&&(f.selected=!1)}t.hidden=r;const c=Tt(t);J&&c.map((f,g,{length:I})=>{f.title=`${g+1}/${I}`})};D&&Object.defineProperty(HTMLInputElement.prototype,"list",{configurable:!0,enumerable:!0,get(){return vt(this).getElementById(p(this,"list")||"")}});kt.define("u-datalist",Kt);const Jt=t=>({}),at=t=>({});function Qt(t){let e;return{c(){e=Nt(t[4])},m(i,o){z(i,e,o)},p(i,o){o&16&&Pt(e,i[4])},d(i){i&&G(e)}}}function st(t){let e,i;return{c(){e=C("div"),d(e,"id",i=`${t[2]}-hint`),d(e,"class","hint")},m(o,r){z(o,e,r),e.innerHTML=t[6]},p(o,r){r&64&&(e.innerHTML=o[6]),r&4&&i!==(i=`${o[2]}-hint`)&&d(e,"id",i)},d(o){o&&G(e)}}}function ot(t){let e,i;const o=[t[8],{hiddenErrorText:t[10]}];let r={};for(let a=0;a<o.length;a+=1)r=ut(r,o[a]);return e=new pt({props:r}),{c(){K(e.$$.fragment)},m(a,l){W(e,a,l),i=!0},p(a,l){const c=l&1280?dt(o,[l&256&&ft(a[8]),l&1024&&{hiddenErrorText:a[10]}]):{};e.$set(c)},i(a){i||(E(e.$$.fragment,a),i=!0)},o(a){T(e.$$.fragment,a),i=!1},d(a){Y(e,a)}}}function rt(t){let e,i;const o=[t[9],{hiddenErrorText:t[10]}];let r={};for(let a=0;a<o.length;a+=1)r=ut(r,o[a]);return e=new pt({props:r}),{c(){K(e.$$.fragment)},m(a,l){W(e,a,l),i=!0},p(a,l){const c=l&1536?dt(o,[l&512&&ft(a[9]),l&1024&&{hiddenErrorText:a[10]}]):{};e.$set(c)},i(a){i||(E(e.$$.fragment,a),i=!0)},o(a){T(e.$$.fragment,a),i=!1},d(a){Y(e,a)}}}function Xt(t){let e,i,o,r,a,l,c,s,f,g,I,v,L,F,w,h,S,H;i=new Vt({props:{textOptional:t[11],isRequired:t[5],showOptionalText:t[12],for:t[2],$$slots:{default:[Qt]},$$scope:{ctx:t}}});let _=t[6]&&st(t),m=t[8]&&ot(t),b=t[15]&&t[9]&&rt(t);const M=t[17].options,y=Ot(M,t,t[20],at);return{c(){e=C("div"),K(i.$$.fragment),o=O(),_&&_.c(),r=O(),m&&m.c(),a=O(),b&&b.c(),l=O(),c=C("div"),s=C("input"),I=O(),v=C("span"),F=O(),w=C("u-datalist"),y&&y.c(),d(s,"type","text"),d(s,"autocomplete","off"),d(s,"id",t[2]),d(s,"name",t[2]),d(s,"list",t[3]),d(s,"class",f="mt-input form-field "+t[7]),d(s,"aria-autocomplete","list"),d(s,"aria-controls",t[3]),d(s,"aria-describedby",g=et(t[6]?t[2]:void 0,t[8])),P(s,"error",!!t[8]),d(v,"role","status"),d(v,"aria-live","assertive"),d(v,"aria-label",L=t[14]?t[13]:""),P(v,"icon--spinner",t[14]),d(c,"class","actions m-t-xxs"),q(w,"id",t[3]),q(w,"class","mt-datalist"),d(e,"class","combobox-wrapper")},m(n,u){z(n,e,u),W(i,e,null),k(e,o),_&&_.m(e,null),k(e,r),m&&m.m(e,null),k(e,a),b&&b.m(e,null),k(e,l),k(e,c),k(c,s),$(s,t[0]),t[19](s),k(c,I),k(c,v),k(e,F),k(e,w),y&&y.m(w,null),h=!0,S||(H=[tt(s,"input",t[18]),tt(s,"input",function(){Ct(t[16])&&t[16].apply(this,arguments)})],S=!0)},p(n,[u]){t=n;const A={};u&2048&&(A.textOptional=t[11]),u&32&&(A.isRequired=t[5]),u&4096&&(A.showOptionalText=t[12]),u&4&&(A.for=t[2]),u&1048592&&(A.$$scope={dirty:u,ctx:t}),i.$set(A),t[6]?_?_.p(t,u):(_=st(t),_.c(),_.m(e,r)):_&&(_.d(1),_=null),t[8]?m?(m.p(t,u),u&256&&E(m,1)):(m=ot(t),m.c(),E(m,1),m.m(e,a)):m&&(X(),T(m,1,1,()=>{m=null}),Z()),t[15]&&t[9]?b?(b.p(t,u),u&33280&&E(b,1)):(b=rt(t),b.c(),E(b,1),b.m(e,l)):b&&(X(),T(b,1,1,()=>{b=null}),Z()),(!h||u&4)&&d(s,"id",t[2]),(!h||u&4)&&d(s,"name",t[2]),(!h||u&8)&&d(s,"list",t[3]),(!h||u&128&&f!==(f="mt-input form-field "+t[7]))&&d(s,"class",f),(!h||u&8)&&d(s,"aria-controls",t[3]),(!h||u&324&&g!==(g=et(t[6]?t[2]:void 0,t[8])))&&d(s,"aria-describedby",g),u&1&&s.value!==t[0]&&$(s,t[0]),(!h||u&384)&&P(s,"error",!!t[8]),(!h||u&24576&&L!==(L=t[14]?t[13]:""))&&d(v,"aria-label",L),(!h||u&16384)&&P(v,"icon--spinner",t[14]),y&&y.p&&(!h||u&1048576)&&Rt(y,M,t,t[20],h?Ft(M,t[20],u,Jt):Dt(t[20]),at),(!h||u&8)&&q(w,"id",t[3])},i(n){h||(E(i.$$.fragment,n),E(m),E(b),E(y,n),h=!0)},o(n){T(i.$$.fragment,n),T(m),T(b),T(y,n),h=!1},d(n){n&&G(e),Y(i),_&&_.d(),m&&m.d(),b&&b.d(),t[19](null),y&&y.d(n),S=!1,Ht(H)}}}function Zt(t,e,i){let{$$slots:o={},$$scope:r}=e,{inputName:a=""}=e,{listName:l=""}=e,{inputLabel:c=""}=e,{inputValue:s=void 0}=e,{inputIsRequired:f=void 0}=e,{inputHelpText:g=void 0}=e,{inputClass:I=""}=e,{inputError:v=void 0}=e,{apiError:L=void 0}=e,{hiddenErrorText:F=void 0}=e,{textOptional:w=void 0}=e,{showOptionalText:h=!0}=e,{formInProgressAriaLabel:S="Søker"}=e,{isLoading:H=!1}=e,{inputRef:_}=e,{isFetchFallback:m=!1}=e,{handleInput:b}=e;function M(){s=this.value,i(0,s)}function y(n){Mt[n?"unshift":"push"](()=>{_=n,i(1,_)})}return t.$$set=n=>{"inputName"in n&&i(2,a=n.inputName),"listName"in n&&i(3,l=n.listName),"inputLabel"in n&&i(4,c=n.inputLabel),"inputValue"in n&&i(0,s=n.inputValue),"inputIsRequired"in n&&i(5,f=n.inputIsRequired),"inputHelpText"in n&&i(6,g=n.inputHelpText),"inputClass"in n&&i(7,I=n.inputClass),"inputError"in n&&i(8,v=n.inputError),"apiError"in n&&i(9,L=n.apiError),"hiddenErrorText"in n&&i(10,F=n.hiddenErrorText),"textOptional"in n&&i(11,w=n.textOptional),"showOptionalText"in n&&i(12,h=n.showOptionalText),"formInProgressAriaLabel"in n&&i(13,S=n.formInProgressAriaLabel),"isLoading"in n&&i(14,H=n.isLoading),"inputRef"in n&&i(1,_=n.inputRef),"isFetchFallback"in n&&i(15,m=n.isFetchFallback),"handleInput"in n&&i(16,b=n.handleInput),"$$scope"in n&&i(20,r=n.$$scope)},[s,_,a,l,c,f,g,I,v,L,F,w,h,S,H,m,b,o,M,y,r]}class $t extends Lt{constructor(e){super(),St(this,e,Zt,Xt,At,{inputName:2,listName:3,inputLabel:4,inputValue:0,inputIsRequired:5,inputHelpText:6,inputClass:7,inputError:8,apiError:9,hiddenErrorText:10,textOptional:11,showOptionalText:12,formInProgressAriaLabel:13,isLoading:14,inputRef:1,isFetchFallback:15,handleInput:16})}}$t.__docgen={version:3,name:"Combobox.svelte",data:[{name:"inputName",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"listName",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"inputLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"inputValue",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"inputIsRequired",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1},{name:"inputHelpText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"inputClass",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'""'},{name:"inputError",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ErrorDetail"},static:!1,readonly:!1},{name:"apiError",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"object",text:"ErrorDetail"},static:!1,readonly:!1},{name:"hiddenErrorText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"textOptional",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"showOptionalText",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"formInProgressAriaLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"Søker"'},{name:"isLoading",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"inputRef",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"object",text:"HTMLInputElement"},static:!1,readonly:!1},{name:"isFetchFallback",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"handleInput",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"function",text:"(e: Event) => Promise<void>"},static:!1,readonly:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[{keywords:[],visibility:"public",description:"",name:"options"}],refs:[]};export{$t as C};
