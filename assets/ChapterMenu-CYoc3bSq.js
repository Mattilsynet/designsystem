import{S as K,i as z,s as F,n as M,o as x,t as I,g as P,a as T,f as Q,w as $,x as V,c as ee,m as te,e as le,d as ae}from"./index-D8riOviU.js";import{f as W,i as b,d as y,o as ie,s as N,e as g,a as p,l as X,c as Y,g as w,b as _,h as J,j as ne,p as se,H as re}from"./lifecycle-CcifP0R7.js";import{e as L}from"./each-Dzkb-YsG.js";import{t as S}from"./utils-DjM8Id44.js";import{s as A}from"./index-DTCOkSMf.js";import{c as ue}from"./toggle-machine-BRWFjtir.js";import{u as oe}from"./useMachine-BoQ-JPCB.js";function O(l,t,e){const i=l.slice();return i[13]=t[e],i[15]=e,i}function D(l){let t,e,i=!l[5]&&E(l),n=(l[6]||l[5])&&q(l);return{c(){i&&i.c(),t=N(),n&&n.c(),e=W()},m(a,r){i&&i.m(a,r),b(a,t,r),n&&n.m(a,r),b(a,e,r)},p(a,r){a[5]?i&&(i.d(1),i=null):i?i.p(a,r):(i=E(a),i.c(),i.m(t.parentNode,t)),a[6]||a[5]?n?(n.p(a,r),r&96&&I(n,1)):(n=q(a),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(P(),T(n,1,1,()=>{n=null}),Q())},d(a){a&&(y(t),y(e)),i&&i.d(a),n&&n.d(a)}}}function E(l){let t,e,i;return{c(){t=g("button"),p(t,"class","mt-button mt-button--on-primary mt-icon-button icon--caret-down-after-on-primary m-r-0"),p(t,"aria-label",l[3]),p(t,"aria-haspopup","true"),p(t,"aria-controls",l[4]),p(t,"aria-expanded",l[6])},m(n,a){b(n,t,a),e||(i=X(t,"click",l[11]),e=!0)},p(n,a){a&8&&p(t,"aria-label",n[3]),a&16&&p(t,"aria-controls",n[4]),a&64&&p(t,"aria-expanded",n[6])},d(n){n&&y(t),e=!1,i()}}}function q(l){let t,e,i,n=L(l[2]||[]),a=[];for(let r=0;r<n.length;r+=1)a[r]=H(O(l,n,r));return{c(){t=g("ul");for(let r=0;r<a.length;r+=1)a[r].c();p(t,"id",l[4]),p(t,"class","mt-ul list-unstyled m-t-0")},m(r,f){b(r,t,f);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(t,null);i=!0},p(r,f){if(l=r,f&7){n=L(l[2]||[]);let s;for(s=0;s<n.length;s+=1){const d=O(l,n,s);a[s]?a[s].p(d,f):(a[s]=H(d),a[s].c(),a[s].m(t,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}(!i||f&16)&&p(t,"id",l[4])},i(r){i||(r&&$(()=>{i&&(e||(e=V(t,A,{duration:R},!0)),e.run(1))}),i=!0)},o(r){r&&(e||(e=V(t,A,{duration:R},!1)),e.run(0)),i=!1},d(r){r&&y(t),Y(a,r),r&&e&&e.end()}}}function G(l){let t,e,i=l[15]+1+"",n,a;return{c(){t=w(l[1]),e=w("."),n=w(i),a=w(".")},m(r,f){b(r,t,f),b(r,e,f),b(r,n,f),b(r,a,f)},p(r,f){f&2&&J(t,r[1])},d(r){r&&(y(t),y(e),y(n),y(a))}}}function H(l){let t,e,i,n=l[13].heading+"",a,r,f,s=l[0]&&G(l);return{c(){t=g("li"),e=g("a"),s&&s.c(),i=N(),a=w(n),f=N(),p(e,"href",r=l[13].url),p(e,"class","mt-link chapter-menu--subchapter"),p(t,"class","layout-flex layout-flex--no-wrap")},m(d,o){b(d,t,o),_(t,e),s&&s.m(e,null),_(e,i),_(e,a),_(t,f)},p(d,o){d[0]?s?s.p(d,o):(s=G(d),s.c(),s.m(e,i)):s&&(s.d(1),s=null),o&4&&n!==(n=d[13].heading+"")&&J(a,n),o&4&&r!==(r=d[13].url)&&p(e,"href",r)},d(d){d&&y(t),s&&s.d()}}}function fe(l){let t,e=l[2].length>0&&D(l);return{c(){e&&e.c(),t=W()},m(i,n){e&&e.m(i,n),b(i,t,n)},p(i,[n]){i[2].length>0?e?e.p(i,n):(e=D(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:M,o:M,d(i){i&&y(t),e&&e.d(i)}}}const R=500;function de(l,t,e){let i,n,a,{showChapterNumbers:r=!1}=t,{parentIndex:f=0}=t,{subChapters:s=[]}=t,{ariaLabel:d="toggle"}=t,{loadJs:o=!0}=t,{id:u=""}=t;const m=ue(`ChapterMenuSubSChapterMachine-${f}`),{state:C,send:h}=oe(m);x(l,C,c=>e(10,a=c)),o&&ie(()=>h("MOUNTED"));const k=()=>{h("TOGGLE")};return l.$$set=c=>{"showChapterNumbers"in c&&e(0,r=c.showChapterNumbers),"parentIndex"in c&&e(1,f=c.parentIndex),"subChapters"in c&&e(2,s=c.subChapters),"ariaLabel"in c&&e(3,d=c.ariaLabel),"loadJs"in c&&e(9,o=c.loadJs),"id"in c&&e(4,u=c.id)},l.$$.update=()=>{l.$$.dirty&1024&&e(6,i=a.context.isOpen),l.$$.dirty&1024&&e(5,n=a.value==="serverRendered")},[r,f,s,d,u,n,i,C,h,o,a,k]}class Z extends K{constructor(t){super(),z(this,t,de,fe,F,{showChapterNumbers:0,parentIndex:1,subChapters:2,ariaLabel:3,loadJs:9,id:4})}}Z.__docgen={version:3,name:"ChapterMenuSubChapter.svelte",data:[{name:"showChapterNumbers",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"parentIndex",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"subChapters",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"array",text:"Chapter[]"},static:!1,readonly:!1,defaultValue:"[]"},{name:"ariaLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"toggle"'},{name:"loadJs",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"},{name:"id",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};function U(l,t,e){const i=l.slice();i[8]=t[e],i[11]=e;const n=i[11]+i[2];return i[9]=n,i}function j(l){let t=l[11]+l[2]+"",e,i;return{c(){e=w(t),i=w(".")},m(n,a){b(n,e,a),b(n,i,a)},p(n,a){a&4&&t!==(t=n[11]+n[2]+"")&&J(e,t)},d(n){n&&(y(e),y(i))}}}function B(l){let t,e,i,n,a=l[8].heading+"",r,f,s,d,o,u,m,C,h=l[4]&&l[9]>0&&j(l);return d=new Z({props:{id:`${S(l[8].heading)}-${l[11]}`,showChapterNumbers:l[4],loadJs:l[6],ariaLabel:l[5],parentIndex:l[11]+l[2],subChapters:l[8].subChapters}}),{c(){t=g("li"),e=g("a"),h&&h.c(),i=N(),n=new re(!1),s=N(),ee(d.$$.fragment),o=N(),n.a=null,p(e,"href",r=l[8].url),p(e,"aria-current",f=l[9]===l[1]?"page":void 0),p(t,"class","mt-li chapter-menu--chapter-wrapper")},m(k,c){b(k,t,c),_(t,e),h&&h.m(e,null),_(e,i),n.m(a,e),_(t,s),te(d,t,null),_(t,o),u=!0,m||(C=X(e,"click",se(function(){le(l[7]("chapterChange",{index:l[8].index}))&&l[7]("chapterChange",{index:l[8].index}).apply(this,arguments)})),m=!0)},p(k,c){l=k,l[4]&&l[9]>0?h?h.p(l,c):(h=j(l),h.c(),h.m(e,i)):h&&(h.d(1),h=null),(!u||c&1)&&a!==(a=l[8].heading+"")&&n.p(a),(!u||c&1&&r!==(r=l[8].url))&&p(e,"href",r),(!u||c&6&&f!==(f=l[9]===l[1]?"page":void 0))&&p(e,"aria-current",f);const v={};c&1&&(v.id=`${S(l[8].heading)}-${l[11]}`),c&16&&(v.showChapterNumbers=l[4]),c&64&&(v.loadJs=l[6]),c&32&&(v.ariaLabel=l[5]),c&4&&(v.parentIndex=l[11]+l[2]),c&1&&(v.subChapters=l[8].subChapters),d.$set(v)},i(k){u||(I(d.$$.fragment,k),u=!0)},o(k){T(d.$$.fragment,k),u=!1},d(k){k&&y(t),h&&h.d(),ae(d),m=!1,C()}}}function ce(l){let t,e,i,n,a,r,f=L(l[0]),s=[];for(let o=0;o<f.length;o+=1)s[o]=B(U(l,f,o));const d=o=>T(s[o],1,1,()=>{s[o]=null});return{c(){t=g("nav"),e=g("h2"),i=w(l[3]),n=N(),a=g("ol");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"id","chapter-menu-title"),p(e,"class","visually-hidden-focusable"),p(a,"class","mt-ol m-t-xxs list-unstyled"),p(t,"class","chapter-menu"),p(t,"aria-labelledby","chapter-menu-title")},m(o,u){b(o,t,u),_(t,e),_(e,i),_(t,n),_(t,a);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(a,null);r=!0},p(o,[u]){if((!r||u&8)&&J(i,o[3]),u&247){f=L(o[0]);let m;for(m=0;m<f.length;m+=1){const C=U(o,f,m);s[m]?(s[m].p(C,u),I(s[m],1)):(s[m]=B(C),s[m].c(),I(s[m],1),s[m].m(a,null))}for(P(),m=f.length;m<s.length;m+=1)d(m);Q()}},i(o){if(!r){for(let u=0;u<f.length;u+=1)I(s[u]);r=!0}},o(o){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)T(s[u]);r=!1},d(o){o&&y(t),Y(s,o)}}}function me(l,t,e){let{chapters:i}=t,{currentChapterNumber:n=0}=t,{startIndex:a=0}=t,{menuTitle:r}=t,{showChapterNumbers:f=!1}=t,{subChapterToggleAriaLabel:s="toggle"}=t,{loadJs:d=!0}=t;const o=ne();return l.$$set=u=>{"chapters"in u&&e(0,i=u.chapters),"currentChapterNumber"in u&&e(1,n=u.currentChapterNumber),"startIndex"in u&&e(2,a=u.startIndex),"menuTitle"in u&&e(3,r=u.menuTitle),"showChapterNumbers"in u&&e(4,f=u.showChapterNumbers),"subChapterToggleAriaLabel"in u&&e(5,s=u.subChapterToggleAriaLabel),"loadJs"in u&&e(6,d=u.loadJs)},[i,n,a,r,f,s,d,o]}class pe extends K{constructor(t){super(),z(this,t,me,ce,F,{chapters:0,currentChapterNumber:1,startIndex:2,menuTitle:3,showChapterNumbers:4,subChapterToggleAriaLabel:5,loadJs:6})}}pe.__docgen={version:3,name:"ChapterMenu.svelte",data:[{name:"chapters",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"array",text:"Chapter[]"},static:!1,readonly:!1},{name:"currentChapterNumber",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"number",text:"number"},static:!1,readonly:!1,defaultValue:"0"},{name:"startIndex",visibility:"public",keywords:[],kind:"let",type:{kind:"union",type:[{kind:"const",type:"number",value:0,text:"0"},{kind:"const",type:"number",value:1,text:"1"}],text:"0 | 1"},static:!1,readonly:!1,defaultValue:"0"},{name:"menuTitle",visibility:"public",keywords:[{name:"required",description:""}],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1},{name:"showChapterNumbers",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"false"},{name:"subChapterToggleAriaLabel",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"string",text:"string"},static:!1,readonly:!1,defaultValue:'"toggle"'},{name:"loadJs",visibility:"public",keywords:[],kind:"let",type:{kind:"type",type:"boolean",text:"boolean"},static:!1,readonly:!1,defaultValue:"true"}],computed:[],methods:[],components:[],description:null,keywords:[],events:[{visibility:"public",description:null,keywords:[],name:"chapterChange"}],slots:[],refs:[]};export{pe as C};
